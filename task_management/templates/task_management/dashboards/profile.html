{% extends 'task_management/dashboards/base_dashboard.html' %}
{% load static %}

{% block title %}Profile - SynPro{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="bg-[#2a2a40] rounded-xl p-6 shadow-lg">
        <h2 class="text-2xl font-bold text-white mb-6">Profile Settings</h2>

        <form id="profileForm" class="space-y-6">
            {% csrf_token %}
            
            <!-- Basic Information -->
            <div class="grid grid-cols-2 gap-6">
                <div class="mb-8 flex items-center justify-center">
                    <div class="relative">
                        <div class="w-32 h-32 rounded-full bg-[#2A2B31] overflow-hidden">
                            <img id="profileImage" src="{% static 'images/default-avatar.png' %}" 
                                 alt="Profile" 
                                 class="w-full h-full object-cover">
                        </div>
                        <div class="absolute bottom-0 right-0">
                            <button type="button" 
                                    onclick="document.getElementById('imageUpload').click()" 
                                    class="bg-[#bf5af2] p-2 rounded-full hover:bg-opacity-90">
                                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"/>
                                </svg>
                            </button>
                        </div>
                        <input type="file" 
                               id="imageUpload" 
                               accept="image/*" 
                               class="hidden"
                               onchange="handleImageUpload(this)">
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">First Name</label>
                    <input type="text" 
                           value="{{ request.user.first_name }}"
                           class="w-full bg-[#1e1f25] text-white rounded-lg border border-gray-800 px-4 py-2.5 focus:outline-none focus:border-[#bf5af2]">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">Last Name</label>
                    <input type="text" 
                           value="{{ request.user.last_name }}"
                           class="w-full bg-[#1e1f25] text-white rounded-lg border border-gray-800 px-4 py-2.5 focus:outline-none focus:border-[#bf5af2]">
                </div>
            </div>

            <!-- Contact Information -->
            <div class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">Email</label>
                    <div class="flex items-center gap-4">
                        <input type="email" 
                               value="{{ request.user.email }}"
                               class="flex-1 bg-[#1e1f25] text-white rounded-lg border border-gray-800 px-4 py-2.5 focus:outline-none focus:border-[#bf5af2]">
                        <button type="button" class="px-4 py-2 bg-[#bf5af2] text-white rounded-lg hover:bg-opacity-90">
                            Verify Email
                        </button>
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">Phone Number</label>
                    <div class="flex items-center gap-4">
                        <input type="tel" 
                               value="{{ request.user.phone }}"
                               class="flex-1 bg-[#1e1f25] text-white rounded-lg border border-gray-800 px-4 py-2.5 focus:outline-none focus:border-[#bf5af2]">
                        <button type="button" class="px-4 py-2 bg-[#bf5af2] text-white rounded-lg hover:bg-opacity-90">
                            Verify Phone
                        </button>
                    </div>
                </div>
            </div>

            <!-- Additional Information -->
            {% if request.user.profile_type == 'student' %}
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">University Name</label>
                <input type="text" 
                       value="{{ request.user.university_name }}"
                       class="w-full bg-[#1e1f25] text-white rounded-lg border border-gray-800 px-4 py-2.5 focus:outline-none focus:border-[#bf5af2]">
            </div>
            {% endif %}

            {% if request.user.profile_type == 'freelancer' or request.user.profile_type == 'professional' %}
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Organization Name</label>
                <input type="text" 
                       value="{{ request.user.organization_name }}"
                       class="w-full bg-[#1e1f25] text-white rounded-lg border border-gray-800 px-4 py-2.5 focus:outline-none focus:border-[#bf5af2]">
            </div>
            {% endif %}

            <!-- Save Button -->
            <div class="flex justify-end">
                <button type="submit" class="px-6 py-2.5 bg-[#bf5af2] text-white rounded-lg hover:bg-opacity-90 transition-colors">
                    Save Changes
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}