{% extends 'task_management/dashboards/base_dashboard.html' %}
{% load static %}

{% block content %}
<div class="max-w-7xl mx-auto">
    <!-- Stats Section -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
        <!-- Current Tasks Card -->
        <div class="bg-[#2a2b31] rounded-xl p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-white text-lg font-semibold">Current Tasks</h3>
                <span class="text-[#bf5af2] text-xl font-bold">65</span>
            </div>
            <div class="flex items-center justify-center">
                <div class="relative w-24 h-24">
                    <svg class="transform -rotate-90 w-24 h-24">
                        <circle cx="48" cy="48" r="45" 
                                stroke="#3a3b41" 
                                stroke-width="6" 
                                fill="none"/>
                        <circle cx="48" cy="48" r="45" 
                                stroke="#bf5af2" 
                                stroke-width="6" 
                                stroke-dasharray="283" 
                                stroke-dashoffset="85" 
                                fill="none"/>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Activity Chart -->
        <div class="col-span-2 bg-[#2a2b31] rounded-xl p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-white text-lg font-semibold">Activity</h3>
                <select class="bg-[#32333a] text-gray-300 rounded-lg px-3 py-1 text-sm">
                    <option>This Week</option>
                    <option>This Month</option>
                </select>
            </div>
            <div class="h-48"> <!-- Fixed height container -->
                <canvas id="activityChart"></canvas>
            </div>
        </div>
    </div>

    <!-- Tasks List -->
    <div class="bg-[#2a2b31] rounded-xl p-6">
        <h2 class="text-white text-xl font-semibold mb-4">Current Tasks</h2>
        
        <!-- Task Items -->
        <div class="space-y-4">
            <div class="bg-[#32333a] rounded-lg p-4 hover:bg-[#3a3b41] transition-colors">
                <div class="flex justify-between items-center">
                    <div>
                        <h4 class="text-white font-medium">Mobile App Design</h4>
                        <p class="text-gray-400 text-sm">Due in 2 days</p>
                    </div>
                    <div class="w-32">
                        <div class="h-2 bg-[#2a2b31] rounded-full">
                            <div class="h-full w-3/4 bg-[#bf5af2] rounded-full"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-[#32333a] rounded-lg p-4 hover:bg-[#3a3b41] transition-colors">
                <div class="flex justify-between items-center">
                    <div>
                        <h4 class="text-white font-medium">Frontend Development</h4>
                        <p class="text-gray-400 text-sm">Due in 5 days</p>
                    </div>
                    <div class="w-32">
                        <div class="h-2 bg-[#2a2b31] rounded-full">
                            <div class="h-full w-1/2 bg-[#bf5af2] rounded-full"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="w-80 bg-[#1E1F25] border-l border-gray-800 p-6">
    <!-- Calendar Section -->
    <div class="mb-6">
        <div class="flex items-center justify-between mb-4">
            <button class="text-gray-400 hover:text-white">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                </svg>
            </button>
            <h3 class="text-white font-medium">July 2024</h3>
            <button class="text-gray-400 hover:text-white">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
            </button>
        </div>
        
        <!-- Calendar Grid -->
        <div class="grid grid-cols-7 gap-1 text-center text-sm">
            <div class="text-gray-500">S</div>
            <div class="text-gray-500">M</div>
            <div class="text-gray-500">T</div>
            <div class="text-gray-500">W</div>
            <div class="text-gray-500">T</div>
            <div class="text-gray-500">F</div>
            <div class="text-gray-500">S</div>
            
            <!-- Calendar days -->
            <!-- Current day highlighted -->
            <div class="h-8 w-8 rounded-full flex items-center justify-center bg-[#bf5af2] text-white">14</div>
        </div>
    </div>

    <!-- Task Today Section -->
    <div>
        <div class="flex items-center justify-between mb-4">
            <h3 class="text-white font-medium">Task Today</h3>
            <button class="text-gray-400 hover:text-white">•••</button>
        </div>
        <!-- Task cards -->
    </div>
</div>

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const ctx = document.getElementById('activityChart').getContext('2d');
    const gradient = ctx.createLinearGradient(0, 0, 0, 150);
    gradient.addColorStop(0, 'rgba(191, 90, 242, 0.4)');
    gradient.addColorStop(1, 'rgba(191, 90, 242, 0.0)');

    new Chart(ctx, {
        type: 'line',
        data: {
            labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
            datasets: [{
                label: 'Tasks Completed',
                data: [2, 4, 3, 5, 4, 6, 3],
                borderColor: '#bf5af2',
                backgroundColor: gradient,
                tension: 0.4,
                fill: true
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: true,
            plugins: {
                legend: {
                    display: false
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    max: 8,
                    grid: {
                        color: 'rgba(255, 255, 255, 0.1)'
                    },
                    ticks: {
                        color: '#a0a0a7'
                    }
                },
                x: {
                    grid: {
                        display: false
                    },
                    ticks: {
                        color: '#a0a0a7'
                    }
                }
            }
        }
    });
});
</script>
{% endblock %}
{% endblock %}